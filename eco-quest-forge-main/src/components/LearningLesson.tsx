import { useState } from "react";
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Progress } from "@/components/ui/progress";
import { Badge } from "@/components/ui/badge";
import {
  BookOpen,
  CheckCircle,
  ArrowLeft,
  ArrowRight,
  Play,
  Pause,
  Volume2,
  Star,
  Target,
  Zap,
  Droplets,
  Recycle,
  TreePine,
  Leaf,
  Lightbulb,
  Clock,
} from "lucide-react";

interface LessonContent {
  id: string;
  title: string;
  type: "text" | "video" | "interactive" | "quiz";
  content: string;
  duration?: string;
  points: number;
}

interface LearningLessonProps {
  moduleId: string;
  moduleTitle: string;
  onBack: () => void;
  onComplete: (points: number) => void;
}

const LearningLesson = ({
  moduleId,
  moduleTitle,
  onBack,
  onComplete,
}: LearningLessonProps) => {
  const [currentLessonIndex, setCurrentLessonIndex] = useState(0);
  const [lessonProgress, setLessonProgress] = useState(0);
  const [isPlaying, setIsPlaying] = useState(false);

  const getLessonContent = (moduleId: string): LessonContent[] => {
    const lessonMap: Record<string, LessonContent[]> = {
      "climate-basics": [
        {
          id: "intro",
          title: "What is Climate Change?",
          type: "text",
          content: `Climate change refers to long-term shifts in global weather patterns and average temperatures. The Earth's climate has always changed naturally, but human activities are now causing it to change much faster than ever before.

**Key Points:**
‚Ä¢ Global temperatures are rising due to greenhouse gas emissions
‚Ä¢ Human activities like burning fossil fuels are the main cause
‚Ä¢ Climate change affects weather patterns, sea levels, and ecosystems
‚Ä¢ We can take action to reduce our impact

**Greenhouse Effect:**
The greenhouse effect is a natural process where certain gases in Earth's atmosphere trap heat from the sun, keeping our planet warm enough to support life. However, human activities are increasing the concentration of these gases, causing the planet to warm too much.`,
          points: 25,
        },
        {
          id: "causes",
          title: "Causes of Climate Change",
          type: "interactive",
          content: `**Main Causes of Climate Change:**

1. **Burning Fossil Fuels** (65%)
   - Coal, oil, and natural gas for electricity and transportation
   - Releases carbon dioxide (CO2) into the atmosphere

2. **Deforestation** (15%)
   - Cutting down forests reduces Earth's ability to absorb CO2
   - Trees are natural carbon sinks

3. **Industrial Processes** (10%)
   - Manufacturing, cement production, and chemical reactions
   - Releases various greenhouse gases

4. **Agriculture** (10%)
   - Livestock farming produces methane
   - Fertilizer use releases nitrous oxide

**Interactive Activity:**
Calculate your carbon footprint by considering your daily activities!`,
          points: 30,
        },
        {
          id: "effects",
          title: "Effects on Our Planet",
          type: "video",
          content:
            "Watch this video to understand how climate change affects different parts of our world.",
          duration: "3:45",
          points: 35,
        },
        {
          id: "solutions",
          title: "Solutions and Actions",
          type: "text",
          content: `**Individual Actions You Can Take:**

üå± **Reduce Energy Use**
‚Ä¢ Turn off lights when not in use
‚Ä¢ Use energy-efficient appliances
‚Ä¢ Unplug electronics when not charging

üöó **Transportation**
‚Ä¢ Walk, bike, or use public transport
‚Ä¢ Carpool with friends
‚Ä¢ Consider electric vehicles

‚ôªÔ∏è **Waste Reduction**
‚Ä¢ Reduce, reuse, recycle
‚Ä¢ Compost organic waste
‚Ä¢ Choose products with less packaging

üíß **Water Conservation**
‚Ä¢ Take shorter showers
‚Ä¢ Fix leaky taps
‚Ä¢ Use water-efficient fixtures

**Community Actions:**
‚Ä¢ Support renewable energy projects
‚Ä¢ Participate in tree planting events
‚Ä¢ Educate others about climate change
‚Ä¢ Advocate for environmental policies`,
          points: 40,
        },
      ],
      "water-conservation": [
        {
          id: "water-cycle",
          title: "The Water Cycle",
          type: "text",
          content: `**Understanding the Water Cycle**

The water cycle is the continuous movement of water on, above, and below the surface of the Earth. This natural process is essential for life on our planet.

**Stages of the Water Cycle:**

1. **Evaporation** - Water from oceans, lakes, and rivers turns into water vapor
2. **Condensation** - Water vapor cools and forms clouds
3. **Precipitation** - Water falls as rain, snow, or hail
4. **Collection** - Water collects in oceans, lakes, and rivers

**Why Water Conservation Matters:**
‚Ä¢ Only 3% of Earth's water is freshwater
‚Ä¢ Less than 1% is easily accessible for human use
‚Ä¢ Population growth increases water demand
‚Ä¢ Climate change affects water availability`,
          points: 20,
        },
        {
          id: "conservation-tips",
          title: "Water Conservation Tips",
          type: "interactive",
          content: `**Practical Water Saving Tips:**

üè† **At Home:**
‚Ä¢ Fix leaky faucets and pipes
‚Ä¢ Install water-efficient showerheads
‚Ä¢ Use a broom instead of a hose to clean driveways
‚Ä¢ Water plants in the morning or evening

üöø **In the Bathroom:**
‚Ä¢ Take shorter showers (aim for 5 minutes)
‚Ä¢ Turn off the tap while brushing teeth
‚Ä¢ Use a bucket instead of a shower for bathing
‚Ä¢ Install dual-flush toilets

üçΩÔ∏è **In the Kitchen:**
‚Ä¢ Wash dishes in a basin, not under running water
‚Ä¢ Use a dishwasher only when full
‚Ä¢ Defrost food in the refrigerator, not under running water
‚Ä¢ Collect water used for rinsing fruits and vegetables

üå± **In the Garden:**
‚Ä¢ Use drought-resistant plants
‚Ä¢ Water plants at the root, not the leaves
‚Ä¢ Use mulch to retain soil moisture
‚Ä¢ Collect rainwater for gardening`,
          points: 30,
        },
        {
          id: "global-issues",
          title: "Global Water Issues",
          type: "video",
          content:
            "Learn about water scarcity and how it affects communities worldwide.",
          duration: "4:20",
          points: 35,
        },
      ],
      "waste-management": [
        {
          id: "three-rs",
          title: "The Three Rs: Reduce, Reuse, Recycle",
          type: "text",
          content: `**The Three Rs of Waste Management**

The three Rs are the foundation of sustainable waste management. They help us minimize our environmental impact and conserve resources.

**1. REDUCE - Use Less**
‚Ä¢ Buy products with minimal packaging
‚Ä¢ Choose reusable items over disposable ones
‚Ä¢ Buy in bulk to reduce packaging
‚Ä¢ Use digital documents instead of printing
‚Ä¢ Bring your own shopping bags

**2. REUSE - Use Again**
‚Ä¢ Use containers for storage
‚Ä¢ Donate clothes and items you no longer need
‚Ä¢ Repair items instead of replacing them
‚Ä¢ Use both sides of paper
‚Ä¢ Repurpose old items creatively

**3. RECYCLE - Process Again**
‚Ä¢ Separate recyclable materials
‚Ä¢ Learn what can be recycled in your area
‚Ä¢ Buy products made from recycled materials
‚Ä¢ Compost organic waste
‚Ä¢ Support recycling programs

**Waste Hierarchy:**
1. Prevention (best)
2. Reuse
3. Recycle
4. Energy Recovery
5. Disposal (worst)`,
          points: 30,
        },
        {
          id: "recycling-guide",
          title: "Recycling Guide",
          type: "interactive",
          content: `**What Can Be Recycled?**

‚ôªÔ∏è **Paper & Cardboard**
‚Ä¢ Newspapers and magazines
‚Ä¢ Cardboard boxes
‚Ä¢ Office paper
‚Ä¢ Paper bags
‚Ä¢ Cereal boxes

ü•§ **Plastics**
‚Ä¢ Water bottles
‚Ä¢ Milk jugs
‚Ä¢ Food containers
‚Ä¢ Shampoo bottles
‚Ä¢ Look for recycling symbols (1-7)

ü•´ **Metals**
‚Ä¢ Aluminum cans
‚Ä¢ Steel cans
‚Ä¢ Aluminum foil
‚Ä¢ Metal lids

üç∑ **Glass**
‚Ä¢ Bottles and jars
‚Ä¢ Clear, green, and brown glass
‚Ä¢ Remove lids and caps

**What NOT to Recycle:**
‚Ä¢ Plastic bags
‚Ä¢ Food waste
‚Ä¢ Broken glass
‚Ä¢ Styrofoam
‚Ä¢ Greasy pizza boxes`,
          points: 25,
        },
        {
          id: "composting",
          title: "Composting Basics",
          type: "text",
          content: `**Composting: Nature's Recycling**

Composting is the natural process of breaking down organic materials into nutrient-rich soil. It's a great way to reduce waste and create fertilizer for plants.

**What to Compost:**
‚Ä¢ Fruit and vegetable scraps
‚Ä¢ Coffee grounds and tea bags
‚Ä¢ Eggshells
‚Ä¢ Grass clippings
‚Ä¢ Leaves
‚Ä¢ Paper towels and napkins

**What NOT to Compost:**
‚Ä¢ Meat and dairy products
‚Ä¢ Oily foods
‚Ä¢ Pet waste
‚Ä¢ Diseased plants
‚Ä¢ Weeds with seeds

**Benefits of Composting:**
‚Ä¢ Reduces landfill waste
‚Ä¢ Creates nutrient-rich soil
‚Ä¢ Reduces the need for chemical fertilizers
‚Ä¢ Helps retain soil moisture
‚Ä¢ Reduces greenhouse gas emissions`,
          points: 35,
        },
      ],
      "renewable-energy": [
        {
          id: "energy-types",
          title: "Types of Renewable Energy",
          type: "text",
          content: `**Renewable Energy Sources**

Renewable energy comes from natural sources that are constantly replenished. Unlike fossil fuels, these energy sources won't run out.

**üåû Solar Energy**
‚Ä¢ Uses sunlight to generate electricity
‚Ä¢ Solar panels convert sunlight to energy
‚Ä¢ Can be used for homes, businesses, and utilities
‚Ä¢ Most abundant energy source on Earth

**üí® Wind Energy**
‚Ä¢ Uses wind to turn turbines
‚Ä¢ Wind farms can generate large amounts of electricity
‚Ä¢ Offshore wind farms are becoming popular
‚Ä¢ Clean and cost-effective

**üíß Hydropower**
‚Ä¢ Uses flowing water to generate electricity
‚Ä¢ Dams and water turbines create power
‚Ä¢ Most common renewable energy source
‚Ä¢ Can be used for large-scale power generation

**üå± Biomass**
‚Ä¢ Uses organic materials like wood, crops, and waste
‚Ä¢ Can be burned or converted to biofuels
‚Ä¢ Carbon neutral when sustainably managed
‚Ä¢ Provides heat, electricity, and transportation fuel

**üåä Geothermal**
‚Ä¢ Uses heat from Earth's interior
‚Ä¢ Geothermal power plants generate electricity
‚Ä¢ Geothermal heat pumps heat and cool buildings
‚Ä¢ Available 24/7, unlike solar and wind`,
          points: 40,
        },
        {
          id: "solar-power",
          title: "Solar Power Deep Dive",
          type: "video",
          content:
            "Explore how solar panels work and their benefits for homes and communities.",
          duration: "5:15",
          points: 45,
        },
        {
          id: "energy-efficiency",
          title: "Energy Efficiency Tips",
          type: "interactive",
          content: `**Making Your Home Energy Efficient**

üí° **Lighting**
‚Ä¢ Replace incandescent bulbs with LEDs
‚Ä¢ Use natural light when possible
‚Ä¢ Turn off lights when leaving a room
‚Ä¢ Install motion sensors for outdoor lighting

üè† **Heating & Cooling**
‚Ä¢ Seal air leaks around windows and doors
‚Ä¢ Use programmable thermostats
‚Ä¢ Insulate your home properly
‚Ä¢ Use ceiling fans to circulate air

üîå **Appliances**
‚Ä¢ Choose Energy Star certified appliances
‚Ä¢ Unplug electronics when not in use
‚Ä¢ Use power strips to easily turn off multiple devices
‚Ä¢ Wash clothes in cold water

üå°Ô∏è **Smart Habits**
‚Ä¢ Adjust thermostat settings seasonally
‚Ä¢ Use appliances during off-peak hours
‚Ä¢ Regular maintenance of HVAC systems
‚Ä¢ Consider renewable energy options`,
          points: 35,
        },
      ],
      "un-sdgs": [
        {
          id: "intro",
          title: "Introduction to UN SDGs",
          type: "text",
          content: `The United Nations Sustainable Development Goals (SDGs) are a collection of 17 global goals designed to be a "blueprint to achieve a better and more sustainable future for all." They were adopted by all UN member states in 2015 as part of the 2030 Agenda for Sustainable Development.

**What are the SDGs?**
The SDGs address global challenges including poverty, inequality, climate change, environmental degradation, peace, and justice. They are interconnected and balance the three dimensions of sustainable development: economic, social, and environmental.

**The 17 Goals:**
1. No Poverty
2. Zero Hunger
3. Good Health and Well-being
4. Quality Education
5. Gender Equality
6. Clean Water and Sanitation
7. Affordable and Clean Energy
8. Decent Work and Economic Growth
9. Industry, Innovation, and Infrastructure
10. Reduced Inequalities
11. Sustainable Cities and Communities
12. Responsible Consumption and Production
13. Climate Action
14. Life Below Water
15. Life on Land
16. Peace, Justice, and Strong Institutions
17. Partnerships for the Goals

**Why They Matter:**
The SDGs provide a shared blueprint for peace and prosperity for people and the planet, now and into the future. They recognize that ending poverty and other deprivations must go hand-in-hand with strategies that improve health and education, reduce inequality, and spur economic growth ‚Äì all while tackling climate change and working to preserve our oceans and forests.`,
          points: 30,
        },
        {
          id: "environmental-goals",
          title: "Environmental SDGs Deep Dive",
          type: "interactive",
          content: `**Key Environmental SDGs:**

üåä **SDG 6: Clean Water and Sanitation**
- Ensure availability and sustainable management of water
- Achieve universal access to safe drinking water
- Improve water quality and reduce pollution
- Increase water-use efficiency

‚ö° **SDG 7: Affordable and Clean Energy**
- Ensure access to affordable, reliable, sustainable energy
- Increase share of renewable energy in global energy mix
- Double global rate of improvement in energy efficiency

üè≠ **SDG 12: Responsible Consumption and Production**
- Achieve sustainable management and efficient use of natural resources
- Reduce waste generation through prevention, reduction, recycling
- Encourage companies to adopt sustainable practices

üå°Ô∏è **SDG 13: Climate Action**
- Strengthen resilience and adaptive capacity to climate-related hazards
- Integrate climate change measures into policies and planning
- Improve education and awareness on climate change

üê† **SDG 14: Life Below Water**
- Conserve and sustainably use oceans, seas, and marine resources
- Prevent and significantly reduce marine pollution
- Minimize ocean acidification

üå≥ **SDG 15: Life on Land**
- Protect, restore, and promote sustainable use of terrestrial ecosystems
- Halt biodiversity loss
- Combat desertification and land degradation

**Interactive Challenge:**
Identify which SDGs your daily activities support or hinder!`,
          points: 35,
        },
        {
          id: "taking-action",
          title: "How to Contribute to SDGs",
          type: "text",
          content: `**Individual Actions for SDGs:**

üéØ **SDG 6 - Water Conservation**
‚Ä¢ Fix leaks and use water-efficient appliances
‚Ä¢ Collect rainwater for gardening
‚Ä¢ Reduce water waste in daily activities
‚Ä¢ Support clean water initiatives

‚ö° **SDG 7 - Clean Energy**
‚Ä¢ Use renewable energy sources
‚Ä¢ Improve home energy efficiency
‚Ä¢ Support clean energy policies
‚Ä¢ Reduce energy consumption

üõí **SDG 12 - Responsible Consumption**
‚Ä¢ Buy only what you need
‚Ä¢ Choose sustainable products
‚Ä¢ Reduce, reuse, recycle
‚Ä¢ Support ethical companies

üå°Ô∏è **SDG 13 - Climate Action**
‚Ä¢ Reduce carbon footprint
‚Ä¢ Use public transport or bike
‚Ä¢ Plant trees
‚Ä¢ Educate others about climate change

üê† **SDG 14 - Ocean Conservation**
‚Ä¢ Reduce plastic use
‚Ä¢ Participate in beach cleanups
‚Ä¢ Support marine conservation
‚Ä¢ Choose sustainable seafood

üå≥ **SDG 15 - Land Protection**
‚Ä¢ Support reforestation projects
‚Ä¢ Protect local wildlife
‚Ä¢ Use sustainable gardening practices
‚Ä¢ Advocate for nature conservation

**Community Engagement:**
‚Ä¢ Join local environmental groups
‚Ä¢ Participate in community cleanups
‚Ä¢ Advocate for sustainable policies
‚Ä¢ Educate others about SDGs
‚Ä¢ Support organizations working on SDGs`,
          points: 40,
        },
      ],
      "community-drives": [
        {
          id: "planning",
          title: "Planning Your Community Drive",
          type: "text",
          content: `**Step-by-Step Planning Guide:**

üìã **1. Choose Your Drive Type**
‚Ä¢ **Plantation Drive**: Tree planting for environmental restoration
‚Ä¢ **River Cleaning**: Water body cleanup and restoration
‚Ä¢ **Cleanup Drive**: General area cleaning and waste management
‚Ä¢ **Awareness Campaign**: Educational and awareness activities

üéØ **2. Define Objectives**
‚Ä¢ Clear, measurable goals
‚Ä¢ Target area and scope
‚Ä¢ Expected outcomes
‚Ä¢ Success metrics

üë• **3. Build Your Team**
‚Ä¢ Recruit volunteers (aim for 10-50 people)
‚Ä¢ Assign roles and responsibilities
‚Ä¢ Team leader and coordinators
‚Ä¢ Safety officer
‚Ä¢ Communication coordinator

üìÖ **4. Timeline Planning**
‚Ä¢ 2-4 weeks advance planning
‚Ä¢ Set event date and time
‚Ä¢ Create detailed schedule
‚Ä¢ Plan for weather contingencies

üìç **5. Location Selection**
‚Ä¢ Identify suitable sites
‚Ä¢ Get necessary permissions
‚Ä¢ Assess safety and accessibility
‚Ä¢ Plan logistics and parking

**Essential Permissions:**
‚Ä¢ Municipal corporation approval
‚Ä¢ Forest department (for plantation)
‚Ä¢ Local police station
‚Ä¢ Property owner consent
‚Ä¢ Environmental clearance (if needed)`,
          points: 35,
        },
        {
          id: "safety-preparation",
          title: "Safety and Preparation",
          type: "interactive",
          content: `**Safety First - Essential Guidelines:**

üõ°Ô∏è **Safety Equipment Checklist**
‚Ä¢ Heavy-duty gloves for all participants
‚Ä¢ Safety masks (N95 or better)
‚Ä¢ First aid kit with trained personnel
‚Ä¢ Safety vests for visibility
‚Ä¢ Proper footwear (closed-toe shoes)
‚Ä¢ Sun protection (hats, sunscreen)
‚Ä¢ Emergency contact list

‚ö†Ô∏è **Safety Protocols**
‚Ä¢ Brief all participants on safety rules
‚Ä¢ Identify potential hazards
‚Ä¢ Have emergency evacuation plan
‚Ä¢ Keep emergency numbers handy
‚Ä¢ Assign safety officers
‚Ä¢ Regular safety check-ins

üß∞ **Essential Tools and Supplies**
‚Ä¢ Shovels and spades (for plantation)
‚Ä¢ Rakes and brooms
‚Ä¢ Trash bags and containers
‚Ä¢ Water for drinking and cleaning
‚Ä¢ Sanitizer and hand wash
‚Ä¢ Measuring tools
‚Ä¢ Plant saplings (for plantation drives)

üì± **Communication Setup**
‚Ä¢ WhatsApp group for coordination
‚Ä¢ Emergency contact system
‚Ä¢ Regular updates and reminders
‚Ä¢ Photo documentation plan
‚Ä¢ Social media strategy

**Do's and Don'ts:**

‚úÖ **DO's:**
‚Ä¢ Always wear safety equipment
‚Ä¢ Work in pairs or groups
‚Ä¢ Stay hydrated and take breaks
‚Ä¢ Follow local regulations
‚Ä¢ Respect the environment
‚Ä¢ Document your work
‚Ä¢ Celebrate achievements

‚ùå **DON'Ts:**
‚Ä¢ Never work alone
‚Ä¢ Don't ignore safety warnings
‚Ä¢ Avoid working in bad weather
‚Ä¢ Don't leave waste behind
‚Ä¢ Never harm local wildlife
‚Ä¢ Don't work without permissions
‚Ä¢ Avoid overexertion`,
          points: 40,
        },
        {
          id: "execution",
          title: "Drive Execution and Follow-up",
          type: "video",
          content: `**Day of the Drive - Execution Plan:**

üåÖ **Morning Setup (1-2 hours before)**
‚Ä¢ Arrive early to set up
‚Ä¢ Mark work areas clearly
‚Ä¢ Distribute equipment and supplies
‚Ä¢ Brief volunteers on tasks
‚Ä¢ Take before photos

‚è∞ **Event Timeline**
‚Ä¢ **9:00 AM**: Registration and briefing
‚Ä¢ **9:30 AM**: Safety orientation
‚Ä¢ **10:00 AM**: Start work activities
‚Ä¢ **12:00 PM**: Break and refreshments
‚Ä¢ **12:30 PM**: Resume work
‚Ä¢ **2:00 PM**: Cleanup and wrap-up
‚Ä¢ **2:30 PM**: Group photo and celebration

üìä **Activities by Drive Type:**

üå± **Plantation Drive:**
‚Ä¢ Dig holes (2x2x2 feet)
‚Ä¢ Plant saplings properly
‚Ä¢ Water immediately after planting
‚Ä¢ Add mulch around base
‚Ä¢ Install support stakes if needed
‚Ä¢ Create maintenance schedule

üåä **River Cleaning:**
‚Ä¢ Remove visible waste and debris
‚Ä¢ Clean riverbanks
‚Ä¢ Separate recyclable materials
‚Ä¢ Proper waste disposal
‚Ä¢ Water quality testing (if possible)
‚Ä¢ Install awareness signs

üßπ **Cleanup Drive:**
‚Ä¢ Systematic area coverage
‚Ä¢ Waste segregation
‚Ä¢ Collection and disposal
‚Ä¢ Area beautification
‚Ä¢ Community education
‚Ä¢ Follow-up maintenance plan

üìà **Post-Drive Follow-up:**
‚Ä¢ Thank all participants
‚Ä¢ Share photos and results
‚Ä¢ Document impact and metrics
‚Ä¢ Plan maintenance activities
‚Ä¢ Schedule follow-up events
‚Ä¢ Report to local authorities
‚Ä¢ Celebrate achievements

**Success Metrics:**
‚Ä¢ Number of participants
‚Ä¢ Area covered/cleaned
‚Ä¢ Trees planted/waste collected
‚Ä¢ Community engagement level
‚Ä¢ Media coverage received
‚Ä¢ Long-term impact assessment`,
          points: 45,
        },
      ],
    };

    return lessonMap[moduleId] || [];
  };

  const lessons = getLessonContent(moduleId);
  const currentLesson = lessons[currentLessonIndex];

  const handleNext = () => {
    if (currentLessonIndex < lessons.length - 1) {
      setCurrentLessonIndex(currentLessonIndex + 1);
      setLessonProgress(((currentLessonIndex + 2) / lessons.length) * 100);
    } else {
      // Complete the module
      const totalPoints = lessons.reduce(
        (sum, lesson) => sum + lesson.points,
        0
      );
      onComplete(totalPoints);
    }
  };

  const handlePrevious = () => {
    if (currentLessonIndex > 0) {
      setCurrentLessonIndex(currentLessonIndex - 1);
      setLessonProgress((currentLessonIndex / lessons.length) * 100);
    }
  };

  const renderLessonContent = () => {
    switch (currentLesson.type) {
      case "text":
        return (
          <div className="prose prose-sm max-w-none">
            <div className="whitespace-pre-line text-muted-foreground leading-relaxed">
              {currentLesson.content}
            </div>
          </div>
        );

      case "video":
        return (
          <div className="space-y-4">
            <div className="aspect-video bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg flex items-center justify-center">
              <div className="text-center text-white">
                <div className="text-4xl mb-4">üé•</div>
                <div className="text-lg font-semibold mb-2">
                  {currentLesson.title}
                </div>
                <div className="text-sm text-gray-300 mb-4">
                  Duration: {currentLesson.duration}
                </div>
                <Button
                  className="btn-eco"
                  onClick={() => setIsPlaying(!isPlaying)}
                >
                  {isPlaying ? (
                    <Pause className="h-4 w-4 mr-2" />
                  ) : (
                    <Play className="h-4 w-4 mr-2" />
                  )}
                  {isPlaying ? "Pause" : "Play"} Video
                </Button>
              </div>
            </div>
            <p className="text-sm text-muted-foreground">
              {currentLesson.content}
            </p>
          </div>
        );

      case "interactive":
        return (
          <div className="space-y-4">
            <div className="prose prose-sm max-w-none">
              <div className="whitespace-pre-line text-muted-foreground leading-relaxed">
                {currentLesson.content}
              </div>
            </div>
            <div className="bg-gradient-to-r from-primary/10 to-primary-glow/10 p-4 rounded-lg border border-primary/20">
              <h4 className="font-semibold text-primary mb-2 flex items-center gap-2">
                <Lightbulb className="h-5 w-5" />
                Interactive Activity
              </h4>
              <p className="text-sm text-muted-foreground">
                Complete the activity above and reflect on how you can apply
                these concepts in your daily life.
              </p>
            </div>
          </div>
        );

      default:
        return (
          <div className="prose prose-sm max-w-none">
            <div className="whitespace-pre-line text-muted-foreground leading-relaxed">
              {currentLesson.content}
            </div>
          </div>
        );
    }
  };

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center justify-between">
        <Button
          variant="ghost"
          onClick={onBack}
          className="flex items-center gap-2"
        >
          <ArrowLeft className="h-4 w-4" />
          Back to Modules
        </Button>
        <div className="text-center">
          <h2 className="text-2xl font-bold text-gradient-eco">
            {moduleTitle}
          </h2>
          <p className="text-sm text-muted-foreground">
            Lesson {currentLessonIndex + 1} of {lessons.length}
          </p>
        </div>
        <div className="w-24"></div> {/* Spacer for centering */}
      </div>

      {/* Progress Bar */}
      <Card className="card-eco">
        <div className="flex items-center justify-between mb-2">
          <span className="text-sm font-medium">Progress</span>
          <span className="text-sm text-muted-foreground">
            {Math.round(lessonProgress)}%
          </span>
        </div>
        <Progress value={lessonProgress} className="h-2" />
      </Card>

      {/* Lesson Content */}
      <Card className="card-eco">
        <div className="p-6">
          <div className="flex items-center gap-3 mb-6">
            <div className="h-12 w-12 rounded-full bg-gradient-to-r from-primary/20 to-primary-glow/20 flex items-center justify-center">
              <BookOpen className="h-6 w-6 text-primary" />
            </div>
            <div>
              <h3 className="text-xl font-semibold">{currentLesson.title}</h3>
              <div className="flex items-center gap-2 mt-1">
                <Badge
                  variant="secondary"
                  className="bg-warning/10 text-warning"
                >
                  <Star className="h-3 w-3 mr-1" />
                  {currentLesson.points} points
                </Badge>
                {currentLesson.duration && (
                  <Badge variant="outline" className="text-xs">
                    <Clock className="h-3 w-3 mr-1" />
                    {currentLesson.duration}
                  </Badge>
                )}
              </div>
            </div>
          </div>

          <div className="min-h-[400px]">{renderLessonContent()}</div>
        </div>
      </Card>

      {/* Navigation */}
      <div className="flex justify-between">
        <Button
          variant="outline"
          onClick={handlePrevious}
          disabled={currentLessonIndex === 0}
        >
          <ArrowLeft className="h-4 w-4 mr-2" />
          Previous
        </Button>

        <Button className="btn-eco" onClick={handleNext}>
          {currentLessonIndex === lessons.length - 1 ? (
            <>
              <CheckCircle className="h-4 w-4 mr-2" />
              Complete Module
            </>
          ) : (
            <>
              Next
              <ArrowRight className="h-4 w-4 ml-2" />
            </>
          )}
        </Button>
      </div>
    </div>
  );
};

export default LearningLesson;
